<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Шифр Полібія UA</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="site.webmanifest">
    <meta name="theme-color" content="#2d3748">
</head>
<body>
    <div class="main-wrapper">
        <button class="close-app-btn" onclick="window.close()">✕</button>
        <img src="image/Polibius.png" class="top-logo" alt="Квадрат Полібія">

        <div class="polybius-master-grid" id="polybiusGrid">
            <div class="grid-cell label"></div>
            <div class="grid-cell label">1</div><div class="grid-cell label">2</div><div class="grid-cell label">3</div>
            <div class="grid-cell label">4</div><div class="grid-cell label">5</div><div class="grid-cell label">6</div>
        </div>

        <div class="text-fields">
            <div class="field-group">
                <label>Текст або код</label>
                <div class="textarea-container">
                    <textarea id="input" placeholder="Введіть текст для обробки..."></textarea>
                    <button class="icon-btn clear" id="clearBtn">✕</button>
                    <div class="action-btns">
                        <button class="icon-btn" id="copy-input-btn">Копіювати</button>
                    </div>
                </div>
            </div>

            <label class="checkbox-wrapper">
                <input type="checkbox" id="ignoreCase" />
                <div class="toggle"></div>
                <span>Ігнорувати регістр</span>
            </label>

            <div class="field-group">
                <label>Результат</label>
                <div class="textarea-container">
                    <textarea id="output" readonly placeholder="Результат зʼявиться тут..."></textarea>
                    <button class="icon-btn clear" id="clearBtnOutput">✕</button>
                    <div class="action-btns">
                        <button class="icon-btn" id="copy-output-btn">Копіювати</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="wiki-section">
            <div class="wiki-divider"></div>
            <div class="wiki-title">Як працює квадрат Полібія?</div>
            <div class="wiki-content">
                <p>Спочатку квадрат Полібія був не стільки "шифром" для приховування таємниць, скільки геніальним способом передачі будь-якого повідомлення на відстань, схожим на абетку Морзе. Історик <strong>Полібій</strong>, який жив у Стародавній Греції, придумав цей квадрат, щоб перетворювати літери на пари чисел, які можна було легко показувати смолоскипами. Вже пізніше цей самий принцип почали використовувати і для простого шифрування.</p>
                <p>Кожна літера української абетки, крапка, кома і пробіл мають своє місце в таблиці — рядок і стовпець.</p>
    
                <h4>Приклад кодування</h4>
                <ul>
                    <li>Літера <strong>"П"</strong> стоїть у рядку 4, стовпці 2 — її код <strong>42</strong>.</li>
                    <li>Літера <strong>"А"</strong> — рядок 1, стовпець 1 — її код <strong>11</strong>.</li>
                    <li>Пробіл (<strong>␣</strong>) — рядок 6, стовпець 6 — код <strong>66</strong>.</li>
                </ul>

                <h4>Особливості шифру</h4>
                <ul>
                    <li><strong>Великі літери:</strong> Позначаються символом <strong>^</strong> перед парою чисел (наприклад: <strong>^42</strong> = П, <strong>42</strong> = п).</li>
                    <li><strong>Інші символи:</strong> Будь-які символи та числа, що є в тексті, але відсутні в таблиці, беруться в квадратні дужки (наприклад: <strong>[!]</strong> або <strong>[7]</strong>).</li>
                </ul>

                <h4>Як працювати з програмою?</h4>
                <p>Просто почни вводити текст у поле. Шифрування та дешифрування відбувається автоматично.</p>
            </div>
        </div>
    </div>

    <script src="script.js" defer></script>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(registration => {
                        console.log('ServiceWorker registration successful with scope: ', registration.scope);
                    })
                    .catch(err => {
                        console.log('ServiceWorker registration failed: ', err);
                    });
            });
        }
    </script>
</body>
</html>
